<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz Star Citizen ‚Äì La Chasse au Savoir XXL</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
  <div class="quiz-card">
    <!-- ===== LOBBY PRINCIPAL ===== -->
    <div id="multiplayer-lobby">
      <!-- √âcran de choix initial -->
      <div id="lobby-choice" style="display: flex; flex-direction: column; align-items: center;">
        <h1 class="lobby-title">Quiz Star Citizen</h1>
        <p class="lobby-desc">Testez vos connaissances sur l'univers de Star Citizen. Rejoignez une partie ou cr√©ez la v√¥tre pour d√©fier vos amis !</p>
        <div class="lobby-btns">
          <button id="btn-create-room" class="btn">Cr√©er une partie</button>
          <button id="btn-join-room" class="btn btn-secondary">Rejoindre une partie</button>
        </div>
        <button id="btn-moderator" class="btn btn-moderator" style="margin-top: 1rem;">Panel Mod√©rateur</button>
      </div>

      <!-- Panneau de cr√©ation (H√¥te) -->
      <div id="host-avatar-selection" style="display: none; flex-direction: column; align-items: center; gap: 1rem; width: 100%; max-width: 500px; margin: 0 auto;">
        <h2 class="lobby-title" style="font-size: 2rem;">Configurer la Partie</h2>
        <input type="text" id="host-name-input" class="input" placeholder="Votre pseudo (H√¥te)">
        <div class="avatar-selector">
          <p style="margin-bottom: 0.5rem; color: var(--text-secondary);">Choisissez votre avatar :</p>
          <div style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin-bottom: 1rem;">
            <button id="host-avatar-prev" class="btn avatar-nav-btn">&lt;</button>
            <div id="host-avatar-display" class="avatar-display"><img id="host-avatar-img" src="" alt="Avatar"></div>
            <button id="host-avatar-next" class="btn avatar-nav-btn">&gt;</button>
          </div>
          <button id="host-avatar-random" class="btn btn-secondary">Al√©atoire</button>
        </div>
        <input type="number" id="input-num-questions" class="input" placeholder="Nombre de questions (5-50)" value="20" min="5" max="50">
        <input type="number" id="input-time-per-question" class="input" placeholder="Temps par question (10-60s)" value="20" min="10" max="60">
        <select id="input-difficulty" class="input"></select>
        <button id="confirm-host-avatar" class="btn">Valider et Cr√©er</button>
      </div>

      <!-- Panneau pour rejoindre une partie -->
      <div id="join-room-panel" style="display: none; flex-direction: column; align-items: center; gap: 1rem; width: 100%; max-width: 500px; margin: 0 auto;">
        <h2 class="lobby-title" style="font-size: 2rem;">Rejoindre une Partie</h2>
        <input type="text" id="input-room-code" class="input" placeholder="Code de la partie" maxlength="8" style="text-transform: uppercase;">
        <input type="text" id="input-player-name" class="input" placeholder="Votre pseudo">
        <div class="avatar-selector">
          <p style="margin-bottom: 0.5rem; color: var(--text-secondary);">Choisissez votre avatar :</p>
          <div style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin-bottom: 1rem;">
            <button id="avatar-prev" class="btn avatar-nav-btn">&lt;</button>
            <div id="avatar-display" class="avatar-display"><img id="avatar-img" src="" alt="Avatar"></div>
            <button id="avatar-next" class="btn avatar-nav-btn">&gt;</button>
          </div>
          <button id="avatar-random" class="btn btn-secondary">Al√©atoire</button>
        </div>
        <button id="btn-join-room-validate" class="btn">Rejoindre</button>
        <div id="join-error" style="color: var(--danger); margin-top: 1rem; display: none; font-weight: 600;"></div>
      </div>

      <!-- Salle d'attente (H√¥te & Joueur) -->
      <div id="create-room-panel" style="display: none; flex-direction: column; align-items: center; width: 100%;">
        <h2 class="lobby-title">Salle d'attente</h2>
        <p class="lobby-desc">Partagez ce code avec vos amis pour qu'ils rejoignent la partie !</p>
        <div id="room-code" class="room-code-display"></div>
        <div style="display: flex; align-items: center; justify-content: space-between; width: 100%; max-width: 600px; margin-top: 1rem;">
            <h3 style="font-size: 1.5rem;">Joueurs</h3>
            <div style="display: flex; align-items: center; gap: 0.5rem; border: 2px solid var(--border); padding: 0.5rem 1rem; border-radius: 1rem;">
                <span style="font-size: 1.2rem;">üë•</span>
                <span id="player-count" style="font-weight: 700; font-size: 1.2rem;">0</span>
            </div>
        </div>
        <ul id="room-players" class="players-list" style="width: 100%; max-width: 600px;"></ul>
        <div class="lobby-btns" style="flex-direction: column; gap: 1rem; margin-top: 1rem;">
            <button id="btn-start-game" class="btn">D√©marrer la partie</button>
            <button id="back-to-menu" class="btn btn-secondary">Retour au menu</button>
        </div>
      </div>
    </div>

    <!-- ===== INTERFACE DE JEU ===== -->
    <div id="main-ui" class="quiz-inner" style="display: none;">
      <div id="quiz-content">
        <!-- Le contenu du quiz sera inject√© ici par JavaScript -->
      </div>
    </div>
  </div>
</div>

<!-- Overlay de chargement -->
<div id="loading-overlay">
  <div class="spinner"></div>
  <div id="loading-message">Chargement...</div>
</div>

<!--Overlay de pause (d√©connexion de l'h√¥te) -->
<div id="pause-overlay">
  <div class="spinner"></div>
  <div id="pause-message">L'h√¥te s'est d√©connect√©. La partie est en pause...</div>
</div>

<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/uuid/8.3.2/uuid.min.js"></script>
<script src="script.js"></script>
</body>
</html>
